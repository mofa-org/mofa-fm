# Docker éƒ¨ç½²å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆå·¥ä½œ

### 1. Docker åŸºç¡€è®¾æ–½

**Dockerfile** (`/Dockerfile`)
- âœ… åŸºäº NVIDIA CUDA 12.1 é•œåƒ
- âœ… å®Œæ•´ä¸­æ–‡æ”¯æŒï¼ˆlocale + ä¸­æ–‡å­—ä½“ï¼‰
- âœ… å®‰è£… Rust å·¥å…·é“¾
- âœ… ç¼–è¯‘ Dora CLI å’ŒåŸºç¡€ç»„ä»¶
- âœ… å®‰è£…æ‰€æœ‰ Python node-hub èŠ‚ç‚¹
- âœ… ä¼˜åŒ–æ„å»ºç¼“å­˜

**æ„å»ºè„šæœ¬** (`/build-docker.sh`)
- âœ… äº¤äº’å¼æ„å»ºç¡®è®¤
- âœ… Docker ç¯å¢ƒæ£€æŸ¥
- âœ… æ„å»ºè¿›åº¦æ˜¾ç¤º
- âœ… æ„å»ºæˆåŠŸ/å¤±è´¥æç¤º

**é…ç½®æ–‡ä»¶** (`/.dockerignore`)
- âœ… æ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶
- âœ… å‡å°æ„å»ºä¸Šä¸‹æ–‡å¤§å°
- âœ… åŠ å¿«æ„å»ºé€Ÿåº¦

### 2. ä¸ºæ¯ä¸ª Example åˆ›å»º Docker å¯åŠ¨è„šæœ¬

#### âœ… chatbot-openai-0905/docker-start.sh
- è‡ªåŠ¨æ£€æµ‹å¹¶æ„å»ºé•œåƒ
- äº¤äº’å¼è¾“å…¥ OPENAI_API_KEY
- è‡ªåŠ¨æŒ‚è½½ Rust äºŒè¿›åˆ¶æ–‡ä»¶
- è‡ªåŠ¨æŒ‚è½½æ¨¡å‹ç›®å½•
- GPU è‡ªåŠ¨æ£€æµ‹
- å®Œæ•´çš„ä¸­æ–‡ç¯å¢ƒå˜é‡
- å¯åŠ¨ WebSocket æœåŠ¡å™¨

#### âœ… chatbot-alicloud-0908/docker-start.sh
- ä½¿ç”¨ ALIBABA_CLOUD_API_KEY
- å…¶ä»–åŠŸèƒ½åŒ chatbot-openai-0905

#### âœ… chatbot-openai-websocket-browser/docker-start.sh
- æ”¯æŒå¤šä¸ª dataflow æ–‡ä»¶
- è‡ªåŠ¨é€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨çš„ yml

#### âœ… conference/docker-start.sh
- äº¤äº’å¼é€‰æ‹©æ¨¡å¼ï¼ˆDebate/Studyï¼‰
- æ”¯æŒå¤šä¸ª API Keys
- æä¾› TUI å¯åŠ¨è¯´æ˜
- ä¿æŒå®¹å™¨è¿è¡Œä¾› debate_monitor.py è¿æ¥

#### âœ… conference-controller/docker-start.sh
- äº¤äº’å¼é€‰æ‹© dataflow ç­–ç•¥
- 4ç§ç­–ç•¥ä¾›é€‰æ‹©
- æ”¯æŒå¤šä¸ª API Keys

### 3. æ–‡æ¡£

**Docker ä½¿ç”¨æŒ‡å—** (`/DOCKER_GUIDE.md`)
- âœ… å®Œæ•´çš„å¿«é€Ÿå¼€å§‹æŒ‡å—
- âœ… 5ä¸ª example çš„ä½¿ç”¨ç¤ºä¾‹
- âœ… é«˜çº§ç”¨æ³•è¯´æ˜
- âœ… æ•…éšœæ’é™¤ç« èŠ‚
- âœ… æ€§èƒ½å¯¹æ¯”
- âœ… æœ€ä½³å®è·µ

**README æ›´æ–°** (`/README.md`)
- âœ… æ·»åŠ  Docker å¿«é€Ÿå¼€å§‹ç« èŠ‚
- âœ… çªå‡º Docker æ¨¡å¼ä¸ºæ¨èæ–¹å¼
- âœ… é“¾æ¥åˆ°è¯¦ç»†æ–‡æ¡£

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### ç”¨æˆ·ä½“éªŒ
- **é›¶é…ç½®**: æ— éœ€å®‰è£… Rustã€Pythonã€ä¾èµ–åº“
- **ä¸€é”®å¯åŠ¨**: `./docker-start.sh` å³å¯è¿è¡Œ
- **æ— æ„ŸçŸ¥**: ç”¨æˆ·æ„Ÿè§‰åƒåœ¨æœ¬åœ°è¿è¡Œï¼Œä½†ç¯å¢ƒå·²éš”ç¦»
- **ä¸­æ–‡å®Œç¾æ”¯æŒ**: locale + å­—ä½“å…¨é…ç½®

### æŠ€æœ¯äº®ç‚¹
- **è‡ªåŠ¨åŒ–**: é•œåƒä¸å­˜åœ¨æ—¶è‡ªåŠ¨æ„å»º
- **æ™ºèƒ½æ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹ GPUã€Rust äºŒè¿›åˆ¶æ–‡ä»¶ä½ç½®
- **çµæ´»æŒ‚è½½**:
  - Rust binaries: `~/dora/target/release`
  - Models: `~/.dora/models`
  - å·¥ä½œç›®å½•: å½“å‰ example ç›®å½•
- **ç¯å¢ƒéš”ç¦»**: ä¸æ±¡æŸ“å®¿ä¸»æœºç¯å¢ƒ

## ğŸ“‹ ä½¿ç”¨æµç¨‹

### é¦–æ¬¡ä½¿ç”¨ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†ä»“åº“
git clone -b pure-dataflow https://github.com/mofa-org/mofa-fm.git
cd mofa-fm

# 2. æ„å»ºé•œåƒï¼ˆ10-20 åˆ†é’Ÿï¼‰
./build-docker.sh

# 3. è¿è¡Œç¤ºä¾‹
cd examples/chatbot-openai-0905
export OPENAI_API_KEY="sk-..."
./docker-start.sh
```

### è‡ªåŠ¨æ¨¡å¼ï¼ˆæ¯ä¸ª example è‡ªåŠ¨æ„å»ºï¼‰

```bash
# ç›´æ¥è¿è¡Œï¼Œè„šæœ¬ä¼šæ£€æµ‹é•œåƒå¹¶è‡ªåŠ¨æ„å»º
cd examples/chatbot-openai-0905
./docker-start.sh
```

## ğŸ§ª æµ‹è¯•å»ºè®®

### é˜¶æ®µ 1: æ„å»ºæµ‹è¯•

```bash
cd /path/to/mofa-fm
./build-docker.sh

# é¢„æœŸç»“æœï¼š
# - æˆåŠŸæ„å»ºé•œåƒ
# - é•œåƒå¤§å°çº¦ 3-5GB
# - åŒ…å«æ‰€æœ‰ä¸­æ–‡å­—ä½“
```

### é˜¶æ®µ 2: åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯• 1: Chatbot OpenAI
```bash
cd examples/chatbot-openai-0905
export OPENAI_API_KEY="your-key"
./docker-start.sh

# é¢„æœŸï¼š
# - å¯åŠ¨æˆåŠŸ
# - WebSocket ç›‘å¬ 8123
# - å¯ä»¥è¿æ¥å¹¶å¯¹è¯
```

#### æµ‹è¯• 2: Conference
```bash
cd examples/conference
export OPENAI_API_KEY="your-key"
./docker-start.sh

# é€‰æ‹© Debate æ¨¡å¼
# é¢„æœŸï¼š
# - Dataflow å¯åŠ¨
# - å¯ä»¥åœ¨æ–°ç»ˆç«¯è¿è¡Œ debate_monitor.py
```

### é˜¶æ®µ 3: ä¸­æ–‡æµ‹è¯•

```bash
# è¿›å…¥å®¹å™¨
docker run -it mofa-fm/dora-runtime:latest bash

# æµ‹è¯•ä¸­æ–‡æ˜¾ç¤º
echo "æµ‹è¯•ä¸­æ–‡"
locale
python -c "print('ä¸­æ–‡æµ‹è¯•')"

# é¢„æœŸï¼š
# - ä¸­æ–‡æ­£å¸¸æ˜¾ç¤º
# - locale æ˜¾ç¤º zh_CN.UTF-8
```

## âš ï¸ å·²çŸ¥é™åˆ¶

1. **é¦–æ¬¡æ„å»ºæ—¶é—´é•¿**: 10-20 åˆ†é’Ÿï¼ˆæ­£å¸¸ï¼‰
2. **é•œåƒè¾ƒå¤§**: 3-5GBï¼ˆåŒ…å«å®Œæ•´ç¯å¢ƒï¼‰
3. **éœ€è¦ Rust äºŒè¿›åˆ¶æ–‡ä»¶**:
   - æŸäº›èŠ‚ç‚¹éœ€è¦ä» Dora ä¸»ä»“åº“ç¼–è¯‘
   - è„šæœ¬ä¼šæç¤ºå¹¶å…è®¸ç»§ç»­ï¼ˆä½¿ç”¨å†…ç½® CLIï¼‰
4. **GPU æ”¯æŒéœ€è¦é¢å¤–é…ç½®**:
   - éœ€è¦å®‰è£… NVIDIA Container Toolkit
   - è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å¯ç”¨

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’ï¼ˆå¯é€‰ï¼‰

### ä¼˜åŒ–é¡¹
- [ ] é¢„æ„å»ºé•œåƒæ¨é€åˆ° Docker Hub
- [ ] åˆ›å»ºè½»é‡çº§åŸºç¡€é•œåƒ
- [ ] æ·»åŠ æ¨¡å‹ä¸‹è½½è„šæœ¬
- [ ] åˆ›å»º Docker Compose é…ç½®

### å¢å¼ºé¡¹
- [ ] æ·»åŠ  Web UI å®¹å™¨
- [ ] æ”¯æŒå¤šå®¹å™¨ç¼–æ’
- [ ] æ·»åŠ ç›‘æ§é¢æ¿
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬

## ğŸ“Š æ–‡ä»¶æ¸…å•

```
mofa-fm/
â”œâ”€â”€ Dockerfile                              # âœ… Docker é•œåƒå®šä¹‰
â”œâ”€â”€ .dockerignore                           # âœ… æ„å»ºæ’é™¤æ–‡ä»¶
â”œâ”€â”€ build-docker.sh                         # âœ… é•œåƒæ„å»ºè„šæœ¬
â”œâ”€â”€ DOCKER_GUIDE.md                         # âœ… è¯¦ç»†ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ README.md                               # âœ… å·²æ›´æ–°
â””â”€â”€ examples/
    â”œâ”€â”€ chatbot-openai-0905/
    â”‚   â””â”€â”€ docker-start.sh                 # âœ… Docker å¯åŠ¨è„šæœ¬
    â”œâ”€â”€ chatbot-alicloud-0908/
    â”‚   â””â”€â”€ docker-start.sh                 # âœ… Docker å¯åŠ¨è„šæœ¬
    â”œâ”€â”€ chatbot-openai-websocket-browser/
    â”‚   â””â”€â”€ docker-start.sh                 # âœ… Docker å¯åŠ¨è„šæœ¬
    â”œâ”€â”€ conference/
    â”‚   â””â”€â”€ docker-start.sh                 # âœ… Docker å¯åŠ¨è„šæœ¬
    â””â”€â”€ conference-controller/
        â””â”€â”€ docker-start.sh                 # âœ… Docker å¯åŠ¨è„šæœ¬
```

## ğŸ‰ å®ŒæˆçŠ¶æ€

- âœ… Dockerfile åˆ›å»ºå®Œæˆï¼ˆæ”¯æŒä¸­æ–‡ï¼‰
- âœ… 5ä¸ª example çš„ docker-start.sh åˆ›å»ºå®Œæˆ
- âœ… build-docker.sh æ„å»ºè„šæœ¬åˆ›å»ºå®Œæˆ
- âœ… DOCKER_GUIDE.md æ–‡æ¡£åˆ›å»ºå®Œæˆ
- âœ… README.md æ›´æ–°å®Œæˆ
- âœ… æ‰€æœ‰æ–‡ä»¶å·²æäº¤å¹¶æ¨é€åˆ° pure-dataflow åˆ†æ”¯

**çŠ¶æ€**: ğŸŸ¢ **å·²å®Œæˆï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•ï¼**
